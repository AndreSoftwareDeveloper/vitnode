import { Steps } from "nextra/components";
import { Callout } from "nextra/components";

# Deployment

## Prepare your server

test

<Steps>
### Install Docker

https://docs.docker.com/engine/install/debian/

### Swap Memory

#### Check your current RAM and Swap Memory

```bash
free -h
```

#### Create swap File

```bash
fallocate -l 2G /swapfile
```

Change `2G` to:

- If you have `<= 2GB RAM`, your Swap Memory should be the same: `2G`,
- If your have more then `> 2GB RAM`, your Swap Memory should be 50% of your RAM. Example your have `8GB RAM` then your Swap Memory should be `4G`.

#### Secure swap File

```bash
chmod 600 /swapfile
```

#### Create swap area

```bash
mkswap /swapfile
```

#### Active swap

```bash
sudo swapon /swapfile
```

</Steps>

## Install VitNode

<Steps>

### Go to home folder

```bash
cd home
```

### Clone repo

```bash
git clone https://github.com/aXenDeveloper/vitnode.git
cd vitnode
```

### Set env File

Copy content from `.env.eample` file to `.env`.

After copy content from example file `you have to` change:

- `LOGIN_TOKEN_SECRET` - Login token must be `unique`,
- `FRONTEND_URL` - Your frontend url, for example `https://frontend.vitnode.com`,
- `DB_USER` - Database user,
- `DB_PASSWORD` - Database password,
- `REDIS_PASSWORD` - Redis password,
- `NEXT_PUBLIC_CLIENT_GRAPHQL_URL` - Your backend url, for example `https://backend.vitnode.com`

### Run Docker

```bash
docker compose -f ./docker-compose-prod.yml -p vitnode-prod up -d
```

</Steps>

Test:

```bash
docker exec -it a2c2a4a0a774 /bin/sh
```

Install nodejs:

```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | bash - &&\
apt-get install -y nodejs
```

pnpm

```bash
npm i pnpm -g
```
