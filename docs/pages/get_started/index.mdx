import { Callout } from 'nextra/components';
import { Tabs } from 'nextra/components';
import { Steps } from 'nextra/components';

# Installation

This guide will help you to install the project on your server.

## ‚ö†Ô∏è System Requirements

- [Node.js 16.14+](https://nodejs.org/) or later,
- [PostgreSQL 16+](https://www.postgresql.org/),
- [Redis 7+](https://redis.io/),
- [pnpm 9+](https://pnpm.io/),
- OS:
  - `Linux` (Recommended),
  - `Windows` with [WSL](https://learn.microsoft.com/en-us/windows/wsl/install),
  - `macOS`

## ‚ö†Ô∏è Hardware Requirements

|         | Minimum        | Recommended    |
| :------ | :------------- | :------------- |
| CPU     | 1GHz (2+ core) | 1GHz (4+ core) |
| RAM     | 1GB            | 4GB            |
| Storage | 10GB           | 20GB           |
| Network | 100Mbps        | 1Gbps          |

## ü™ö Extensions for VSCode

- [ESLint](https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint)
- [Prettier](https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode)
- [Tailwind CSS IntelliSense](https://marketplace.visualstudio.com/items?itemName=bradlc.vscode-tailwindcss)

## Main Steps

<Steps>

### Get files

<Tabs items={['git', 'zip']}>
  <Tabs.Tab>

```bash
git clone https://github.com/aXenDeveloper/vitnode.git
cd vitnode
```

  </Tabs.Tab>
  <Tabs.Tab>
    1. Go to [GitHub VitNode](https://github.com/aXenDeveloper/vitnode),
    2. Click on the green button `Code`,
    3. Click on `Download ZIP`,
    4. Unzip the file on your server,
    5. Open the folder in the terminal.
  </Tabs.Tab>
</Tabs>

### Install dependencies

```bash
pnpm install
```

</Steps>

## Backend

<Steps>

### Prepere database

Install `PostgreSQL` on your server.

### Environment variables for Backend

Go to `backend` folder and create new `.env` file. Copy the contents from `.env.example` file.

Then fill the values:

```bash
# General
# PORT=8080

# Tokens
LOGIN_TOKEN_SECRET=SECRET

# Database
DATABASE_URL=postgresql://USER:PASSWORD@HOST:PORT/DATABASE

# Redis
REDIS_URL=redis://HOST:PORT
# REDIS_PASSWORD=PASSWORD

# Frontend
COOKIE_DOMAIN=localhost
```

<Callout type="info" emoji="‚ÑπÔ∏è">
  Commented out values are optional
</Callout>

Description:

- `LOGIN_TOKEN_SECRET` - Secret for login token,
- `DATABASE_URL` - URL to the database,
- `REDIS_URL` - URL to the Redis,
- `REDIS_PASSWORD` - Password to the Redis _(optional)_,
- `COOKIE_DOMAIN` - Domain for cookies _(Domian where is your frontend)_.

<Callout type="warning" emoji="‚ö†Ô∏è">
  Remember to change the value in `LOGIN_TOKEN_SECRET`! You can generate new secrets with
  [RandomKeygen](https://randomkeygen.com/).
</Callout>

### Generate database schema

```bash
pnpm backend:init
```

### Build

```bash
pnpm backend:build
```

### Run

```bash
pnpm backend:start
```

</Steps>

## Frontend

<Steps>

### Environment variables for Frontend

Go to `frontend` folder and create new `.env` file. Copy the contents from `.env.example` file.

Then fill the values:

```bash
NEXT_PUBLIC_GRAPHQL_URL=http://localhost:8080
```

Description:

- `NEXT_PUBLIC_GRAPHQL_URL` - URL to the backend.

### Build

```bash
pnpm frontend:build
```

### Run

```bash
pnpm frontend:start
```

### Finish

Now when you open your website in the browser, you should see the wizard install page. Follow the instructions on the screen.

</Steps>
